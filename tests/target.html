<html>
<head>
</head>

<body>

<div id="click" style="width: 100px; height: 100px; background-color: gray">click</div>

</body>
<script src="http://localhost:8087/socket.io/socket.io.js"></script>
<script src="../browser/remref.js"></script>
<script>

var options = { server: "http://localhost:8087" };

var rpc = new RemoteReflection('target', 'client', options);

console.log("target initialised");

window.click = document.getElementById("click");

var a = {
    b: {
        foo: 99
    }
};


a.b.back = a;

var circular = {
    loop: a
};

var funcs = {
    badfunc: function() {
        console.log("badfunc invoked");
        throw { foo: "failed!", code: 99 };
    },
    circular: function() {
        return a;
    }
};



</script>

</html>
